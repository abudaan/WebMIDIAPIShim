(function p(_,e,n){function t(i,o){if(!e[i]){if(!_[i]){var r="function"==typeof require&&require;if(!o&&r)return r(i,!0);if(s)return s(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var d=e[i]={exports:{}};_[i][0].call(d.exports,function(o){var e=_[i][1][o];return t(e?e:o)},d,d.exports,p,_,e,n)}return e[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)t(n[i]);return t})({1:[function(e,n){(function(t,i){var o="./bin/",s=t.versions.node.split(".");0==s[0]&&10>=s[1]?o+="0_10/":0==s[0]&&12>=s[1]?o+="0_12/":4>=s[0]?o+="4_8/":5>=s[0]?o+="5_12/":6>=s[0]?o+="6_12/":7>=s[0]?o+="7_10/":8>=s[0]&&(o+="8_9/"),"win32"==t.platform&&"ia32"==t.arch?o+="win32/jazz":"win32"==t.platform&&"x64"==t.arch?o+="win64/jazz":"darwin"==t.platform&&"x64"==t.arch?o+="macos64/jazz":"darwin"==t.platform&&"ia32"==t.arch?o+="macos32/jazz":"linux"==t.platform&&"x64"==t.arch?o+="linux64/jazz":"linux"==t.platform&&"ia32"==t.arch?o+="linux32/jazz":"linux"==t.platform&&"arm"==t.arch&&(o+="linuxa7/jazz"),n.exports=e(o),n.exports.package=e(i+"/package.json")}).call(this,e("_process"),"/node_modules/jazz-midi")},{_process:2}],2:[function(e,n){function t(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(u===setTimeout)return setTimeout(e,0);if((u===t||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(n){try{return u.call(null,e,0)}catch(n){return u.call(this,e,0)}}}function s(e){if(_===clearTimeout)return clearTimeout(e);if((_===i||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(e);try{return _(e)}catch(n){try{return _.call(null,e)}catch(n){return _.call(this,e)}}}function a(){g&&c&&(g=!1,c.length?m=c.concat(m):h=-1,m.length&&r())}function r(){if(!g){var e=o(a);g=!0;for(var n=m.length;n;){for(c=m,m=[];++h<n;)c&&c[h].run();h=-1,n=m.length}c=null,g=!1,s(e)}}function l(e,n){this.fun=e,this.array=n}function p(){}var u,_,d=n.exports={};(function(){try{u="function"==typeof setTimeout?setTimeout:t}catch(n){u=t}try{_="function"==typeof clearTimeout?clearTimeout:i}catch(n){_=i}})();var c,m=[],g=!1,h=-1;d.nextTick=function(e){var n=Array(arguments.length-1);if(1<arguments.length)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];m.push(new l(e,n)),1!==m.length||g||o(r)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=p,d.addListener=p,d.once=p,d.off=p,d.removeListener=p,d.removeAllListeners=p,d.emit=p,d.prependListener=p,d.prependOnceListener=p,d.listeners=function(){return[]},d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],3:[function(e){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function t(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}var i,o=e("./midi/midi_access"),s=e("./util/util"),a=e("./midi/midi_input"),r=t(a),l=e("./midi/midi_output"),p=t(l),u=e("./midi/midimessage_event"),_=n(u),d=e("./midi/midiconnection_event"),c=n(d);(function(){navigator.requestMIDIAccess||((0,s.polyfill)(),navigator.requestMIDIAccess=function(){if(i==void 0){i=(0,o.createMIDIAccess)();var e=(0,s.getScope)();e.MIDIInput=r,e.MIDIOutput=p,e.MIDIMessageEvent=_.default,e.MIDIConnectionEvent=c.default}return i},!0===(0,s.getDevice)().nodejs&&(navigator.close=function(){(0,o.closeAllMIDIInputs)()}))})()},{"./midi/midi_access":4,"./midi/midi_input":5,"./midi/midi_output":6,"./midi/midiconnection_event":7,"./midi/midimessage_event":8,"./util/util":11}],4:[function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function s(){x.clear(),I.clear(),(0,l.default)().info().inputs.forEach(function(e){var n=new u.default(e);x.set(n.id,n)}),(0,l.default)().info().outputs.forEach(function(e){var n=new d.default(e);I.set(n.id,n)})}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t,o=0;o<n.length;o++)t=n[o],t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();t.getMIDIPorts=s,t.createMIDIAccess=function(){return new Promise(function(e,n){return"undefined"==typeof y?"ie9"===(0,g.getDevice)().browser?void n({message:"WebMIDIAPIShim supports Internet Explorer 10 and above."}):void(0,l.default)().or(function(){n({message:"No access to MIDI devices: your browser does not support the WebMIDI API and the Jazz extension (or Jazz plugin) is not installed."})}).and(function(){s(),y=new z(x,I),e(y)}).err(function(e){n(e)}):void e(y)})},t.dispatchEvent=function(e){e.dispatchEvent(new m.default(e,e));var n=new m.default(y,e);"function"==typeof y.onstatechange&&y.onstatechange(n),v.forEach(function(e){return e(n)})};var r=e("../util/jzz"),l=i(r),p=e("./midi_input"),u=i(p),_=e("./midi_output"),d=i(_),c=e("./midiconnection_event"),m=i(c),g=e("../util/util"),h=e("../util/store"),f=i(h),y=void 0,v=new f.default,x=new f.default,I=new f.default,z=function(){function e(n,t){o(this,e),this.sysexEnabled=!0,this.inputs=n,this.outputs=t}return a(e,[{key:"addEventListener",value:function(e,n){"statechange"!==e||!1===v.has(n)&&v.add(n)}},{key:"removeEventListener",value:function(e,n){"statechange"!==e||!0===v.has(n)&&v.delete(n)}}]),e}()},{"../util/jzz":9,"../util/store":10,"../util/util":11,"./midi_input":5,"./midi_output":6,"./midiconnection_event":7}],5:[function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,n){for(var t,o=0;o<n.length;o++)t=n[o],t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=e("../util/jzz"),r=i(a),l=e("./midimessage_event"),p=i(l),u=e("./midiconnection_event"),_=i(u),d=e("./midi_access"),c=e("../util/util"),m=e("../util/store"),g=i(m),h=function(){function e(n){o(this,e),this.id=n.id||(0,c.generateUUID)(),this.name=n.name,this.manufacturer=n.manufacturer,this.version=n.version,this.type="input",this.state="connected",this.connection="pending",this.port=null,this.onstatechange=null,this._onmidimessage=null,Object.defineProperty(this,"onmidimessage",{set:function(e){var n=this;this._onmidimessage=e,"function"==typeof e&&(null===this.port&&this.open(),this.port.connect(function(t){var i=new p.default(n,t);e(i)}))}}),this._listeners=new g.default().set("midimessage",new g.default).set("statechange",new g.default)}return s(e,[{key:"addEventListener",value:function(e,n){var t=this._listeners.get(e);"undefined"==typeof t||!1===t.has(n)&&t.add(n)}},{key:"removeEventListener",value:function(e,n){var t=this._listeners.get(e);"undefined"==typeof t||!0===t.has(n)&&t.delete(n)}},{key:"dispatchEvent",value:function(e){var n=this._listeners.get(e.type);n.forEach(function(n){n(e)}),"midimessage"===e.type?null!==this._onmidimessage&&this._onmidimessage(e):"statechange"===e.type&&null!==this.onstatechange&&this.onstatechange(e)}},{key:"open",value:function(){var e=this;"open"===this.connection||(this.port=(0,r.default)().openMidiIn(this.name).or("Could not open input "+this.name).and(function(){e.connection="open",(0,d.dispatchEvent)(e)}))}},{key:"close",value:function(){var e=this;"closed"===this.connection||this.port.close().or("Could not close input "+this.name).and(function(){e.connection="closed",(0,d.dispatchEvent)(e),e.port=null,e._onmidimessage=null,e.onstatechange=null,e._listeners.get("midimessage").clear(),e._listeners.get("statechange").clear()})}}]),e}();t.default=h},{"../util/jzz":9,"../util/store":10,"../util/util":11,"./midi_access":4,"./midiconnection_event":7,"./midimessage_event":8}],6:[function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,n){for(var t,o=0;o<n.length;o++)t=n[o],t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=e("../util/jzz"),r=i(a),l=e("../util/util"),p=e("../util/store"),u=i(p),_=e("./midi_access"),d=function(){function e(n){o(this,e),this.id=n.id||(0,l.generateUUID)(),this.name=n.name,this.manufacturer=n.manufacturer,this.version=n.version,this.type="output",this.state="connected",this.connection="pending",this.onmidimessage=null,this.onstatechange=null,this.port=null,this._listeners=new u.default}return s(e,[{key:"open",value:function(){var e=this;"open"===this.connection||(this.port=(0,r.default)().openMidiOut(this.name).or("Could not open input "+this.name).and(function(){e.connection="open",(0,_.dispatchEvent)(e)}))}},{key:"close",value:function(){var e=this;"closed"===this.connection||this.port.close().or("Could not close output "+this.name).and(function(){e.connection="closed",(0,_.dispatchEvent)(e),e.onstatechange=null,e._listeners.clear()})}},{key:"send",value:function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,t=0;return 0!==n&&(t=Math.floor(n-performance.now())),this.port.wait(t).send(e),!0}},{key:"clear",value:function(){}},{key:"addEventListener",value:function(e,n){"statechange"!==e||!1===this._listeners.has(n)&&this._listeners.add(n)}},{key:"removeEventListener",value:function(e,n){"statechange"!==e||!0===this._listeners.has(n)&&this._listeners.delete(n)}},{key:"dispatchEvent",value:function(e){this._listeners.forEach(function(n){n(e)}),null!==this.onstatechange&&this.onstatechange(e)}}]),e}();t.default=d},{"../util/jzz":9,"../util/store":10,"../util/util":11,"./midi_access":4}],7:[function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(n,t){i(this,e),this.bubbles=!1,this.cancelBubble=!1,this.cancelable=!1,this.currentTarget=n,this.defaultPrevented=!1,this.eventPhase=0,this.path=[],this.port=t,this.returnValue=!0,this.srcElement=n,this.target=n,this.timeStamp=Date.now(),this.type="statechange"}},{}],8:[function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(n,t,o){i(this,e),this.bubbles=!1,this.cancelBubble=!1,this.cancelable=!1,this.currentTarget=n,this.data=t,this.defaultPrevented=!1,this.eventPhase=0,this.path=[],this.receivedTime=o,this.returnValue=!0,this.srcElement=n,this.target=n,this.timeStamp=Date.now(),this.type="midimessage"}},{}],9:[function(e,n){"use strict";function t(e){var o=this instanceof t?this:o=new t;if(o._from=e instanceof t?e._from.slice():[],!arguments.length)return o;for(var s,n=e instanceof Array?e:arguments,a=0;a<n.length;a++)s=n[a],o.push(s);return o}t.prototype=[],t.prototype.constructor=t,t.prototype._stamp=function(e){return this._from.push(e._orig?e._orig:e),this},t.prototype._unstamp=function(e){if("undefined"==typeof e)this._from=[];else{e._orig&&(e=e._orig);var n=this._from.indexOf(e);-1<n&&this._from.splice(n,1)}return this},t.prototype._stamped=function(e){e._orig&&(e=e._orig);for(var n=0;n<this._from.length;n++)if(this._from[n]==e)return!0;return!1},n.exports=function(){function i(){this._orig=this,this._ready=!1,this._queue=[],this._err=[]}function o(e,n){setTimeout(function(){e._resume()},n)}function s(e){e instanceof Function?e.apply(this):console.log(e)}function a(e){e instanceof Function?e.apply(this):console.log(e)}function r(e){this._break("closed"),e._resume()}function l(e){if(!e.length)return void this._break();var n=e.shift();if(e.length){var t=this;this._slip(a,[function(){l.apply(t,[e])}])}try{this._repair(),n.apply(this)}catch(n){this._break(n.toString())}}function p(e,n){for(var t=0;t<e.length;t++)if(e[t]===n)return;e.push(n)}function u(e,n){for(var t=0;t<e.length;t++)if(e[t]===n)return void e.splice(t,1)}function _(){i.apply(this)}function d(){_.prototype._time||(_.prototype._time=function(){return Date.now()}),_.prototype._startTime=_.prototype._time(),_.prototype.time=function(){return _.prototype._time()-_.prototype._startTime}}function c(e,n,t){if("undefined"==typeof n)return c(e,[],[]);if(e instanceof Object){for(var o=0;o<n.length;o++)if(n[o]===e)return t[o];var i;for(var s in i=e instanceof Array?[]:{},n.push(e),t.push(i),e)e.hasOwnProperty(s)&&(i[s]=c(e[s],n,t));return i}return e}function m(){this._info.engine=B._type,this._info.version=B._version,this._info.sysex=B._sysex,this._info.inputs=[],this._info.outputs=[],U=[],J=[],B._allOuts={},B._allIns={};var e,n;for(e=0;e<B._outs.length;e++)n=B._outs[e],n.engine=B,B._allOuts[n.name]=n,this._info.outputs.push({name:n.name,manufacturer:n.manufacturer,version:n.version,engine:B._type}),U.push(n);for(e=0;e<N._outs.length;e++)n=N._outs[e],this._info.outputs.push({name:n.name,manufacturer:n.manufacturer,version:n.version,engine:n.type}),U.push(n);for(e=0;e<B._ins.length;e++)n=B._ins[e],n.engine=B,B._allIns[n.name]=n,this._info.inputs.push({name:n.name,manufacturer:n.manufacturer,version:n.version,engine:B._type}),J.push(n);for(e=0;e<N._ins.length;e++)n=N._ins[e],this._info.inputs.push({name:n.name,manufacturer:n.manufacturer,version:n.version,engine:n.type}),J.push(n)}function g(){this._slip(m,[]),B._refresh()}function h(e,t){if("undefined"==typeof e)return t.slice();var o,i,n=[];if(e instanceof RegExp){for(i=0;i<t.length;i++)e.test(t[i].name)&&n.push(t[i]);return n}for(e instanceof Function&&(e=e(t)),e instanceof Array||(e=[e]),o=0;o<e.length;o++)for(i=0;i<t.length;i++)(e[o]+""==i+""||e[o]===t[i].name||e[o]instanceof Object&&e[o].name===t[i].name)&&n.push(t[i]);return n}function f(e,n){var t;t=n instanceof RegExp?"Port matching "+n+" not found":n instanceof Object||"undefined"==typeof n?"Port not found":"Port \""+n+"\" not found",e._crash(t)}function y(e,n){function t(e){return function(){e.engine._openOut(this,e.name)}}var o=h(n,U);if(!o.length)return void f(e,n);for(var s=0;s<o.length;s++)o[s]=t(o[s]);e._slip(l,[o]),e._resume()}function v(e,n){function t(e){return function(){e.engine._openIn(this,e.name)}}var o=h(n,J);if(!o.length)return void f(e,n);for(var s=0;s<o.length;s++)o[s]=t(o[s]);e._slip(l,[o]),e._resume()}function x(){i.apply(this),this._handles=[],this._outs=[]}function I(e){this._receive(e)}function z(e){this._emit(e)}function b(e){e instanceof Function?p(this._orig._handles,e):p(this._orig._outs,e)}function M(e){e instanceof Function?u(this._orig._handles,e):u(this._orig._outs,e)}function k(){return"undefined"!=typeof n&&n.exports?void T(e("jazz-midi")):void this._break()}function E(){var e=document.createElement("div");e.style.visibility="hidden",document.body.appendChild(e);var n=document.createElement("object");return n.style.visibility="hidden",n.style.width="0px",n.style.height="0px",n.classid="CLSID:1ACE1618-1C7D-4561-AEE1-34842AA85E90",n.type="audio/x-jazz",document.body.appendChild(n),n.isJazz?void L(n):void this._break()}function w(){function e(){if(n=!0,t||(t=document.getElementById("jazz-midi-msg")),!!t){var o=[];try{o=JSON.parse(t.innerText)}catch(n){}t.innerText="",document.removeEventListener("jazz-midi-msg",e),"version"===o[0]?(S(t,o[2]),i._resume()):i._crash()}}var n,t,i=this;this._pause(),document.addEventListener("jazz-midi-msg",e);try{document.dispatchEvent(new Event("jazz-midi"))}catch(n){}window.setTimeout(function(){n||i._crash()},0)}function O(){this._pause();var e=this;setTimeout(function(){e._crash()},0)}function j(e){for(var n=[k,O],t=A(e),o=0;o<t.length;o++)"extension"==t[o]?n.push(w):"plugin"==t[o]&&n.push(E);return n.push(C),n}function A(e){var n=["plugin","extension"];if(!e||!e.engine)return n;for(var t,o,s,a=e.engine instanceof Array?e.engine:[e.engine],r={},l=[],p=[],_=0;_<a.length;_++)s=a[_].toString().toLowerCase(),r[s]||(r[s]=!0,"none"===s&&(t=!0),"etc"===s&&(o=!0),o?p.push(s):l.push(s),u(n,s));return(o||l.length||p.length)&&(t=!1),t?[]:l.concat(o?n:p)}function P(e){W=new _,W._options=e,W._push(l,[j(e)]),W.refresh(),W._push(d,[]),W._push(function(){U.length||J.length||this._break()},[]),W._resume()}function C(){B._type="none",B._sysex=!0,B._refresh=function(){B._outs=[],B._ins=[]}}function D(){B._inArr=[],B._outArr=[],B._inMap={},B._outMap={},B._version=B._main.version,B._sysex=!0,B._refresh=function(){B._outs=[],B._ins=[];var e,n;for(e=0;(n=B._main.MidiOutInfo(e)).length;e++)B._outs.push({type:B._type,name:n[0],manufacturer:n[1],version:n[2]});for(e=0;(n=B._main.MidiInInfo(e)).length;e++)B._ins.push({type:B._type,name:n[0],manufacturer:n[1],version:n[2]})},B._openOut=function(e,n){var t=B._outMap[n];if(!t){B._pool.length<=B._outArr.length&&B._pool.push(B._newPlugin()),t={name:n,clients:[],info:{name:n,manufacturer:B._allOuts[n].manufacturer,version:B._allOuts[n].version,type:"MIDI-out",sysex:B._sysex,engine:B._type},_close:function(e){B._closeOut(e)},_receive:function(e){this.plugin.MidiOutRaw(e.slice())}};var i=B._pool[B._outArr.length];t.plugin=i,B._outArr.push(t),B._outMap[n]=t}if(!t.open){var o=t.plugin.MidiOutOpen(n);if(o!==n)return o&&t.plugin.MidiOutClose(),void e._break();t.open=!0}e._orig._impl=t,p(t.clients,e._orig),e._info=t.info,e._receive=function(e){t._receive(e)},e._close=function(){t._close(this)}},B._openIn=function(e,n){var i=B._inMap[n];if(!i){B._pool.length<=B._inArr.length&&B._pool.push(B._newPlugin()),i={name:n,clients:[],info:{name:n,manufacturer:B._allIns[n].manufacturer,version:B._allIns[n].version,type:"MIDI-in",sysex:B._sysex,engine:B._type},_close:function(e){B._closeIn(e)},handle:function(e,n){for(var o,s=0;s<this.clients.length;s++)o=t(n),this.clients[s]._emit(o)}},i.onmidi=function(e){return function(n,t){e.handle(n,t)}}(i);var o=B._pool[B._inArr.length];i.plugin=o,B._inArr.push(i),B._inMap[n]=i}if(!i.open){var a=i.plugin.MidiInOpen(n,i.onmidi);if(a!==n)return a&&i.plugin.MidiInClose(),void e._break();i.open=!0}e._orig._impl=i,p(i.clients,e._orig),e._info=i.info,e._close=function(){i._close(this)}},B._closeOut=function(e){var n=e._impl;u(n.clients,e._orig),n.clients.length||(n.open=!1,n.plugin.MidiOutClose())},B._closeIn=function(e){var n=e._impl;u(n.clients,e._orig),n.clients.length||(n.open=!1,n.plugin.MidiInClose())},B._close=function(){for(var e=0;e<B._inArr.length;e++)B._inArr[e].open&&B._inArr[e].plugin.MidiInClose()},_.prototype._time=function(){return B._main.Time()}}function T(e){B._type="node",B._main=e,B._pool=[],B._newPlugin=function(){return new e.MIDI},D()}function L(e){B._type="plugin",B._main=e,B._pool=[e],B._newPlugin=function(){var n=document.createElement("object");return n.style.visibility="hidden",n.style.width="0px",e.style.height="0px",n.classid="CLSID:1ACE1618-1C7D-4561-AEE1-34842AA85E90",n.type="audio/x-jazz",document.body.appendChild(n),n.isJazz?n:void 0},D()}function S(e,n){B._type="extension",B._version=n,B._sysex=!0,B._pool=[],B._inArr=[],B._outArr=[],B._inMap={},B._outMap={},B._msg=e,B._newPlugin=function(){var e={id:B._pool.length};e.id?document.dispatchEvent(new CustomEvent("jazz-midi",{detail:["new"]})):e.ready=!0,B._pool.push(e)},B._newPlugin(),B._refresh=function(){B._outs=[],B._ins=[],W._pause(),document.dispatchEvent(new CustomEvent("jazz-midi",{detail:["refresh"]}))},B._openOut=function(e,n){var t=B._outMap[n];if(!t){B._pool.length<=B._outArr.length&&B._newPlugin();var i=B._pool[B._outArr.length];t={name:n,clients:[],info:{name:n,manufacturer:B._allOuts[n].manufacturer,version:B._allOuts[n].version,type:"MIDI-out",sysex:B._sysex,engine:B._type},_start:function(){document.dispatchEvent(new CustomEvent("jazz-midi",{detail:["openout",i.id,n]}))},_close:function(e){B._closeOut(e)},_receive:function(e){var n=e.slice();n.splice(0,0,"play",i.id),document.dispatchEvent(new CustomEvent("jazz-midi",{detail:n}))}},t.plugin=i,i.output=t,B._outArr.push(t),B._outMap[n]=t}e._orig._impl=t,p(t.clients,e._orig),e._info=t.info,e._receive=function(e){t._receive(e)},e._close=function(){t._close(this)},t.open||(t.plugin.ready&&t._start(),e._pause())},B._openIn=function(e,n){var t=B._inMap[n];if(!t){B._pool.length<=B._inArr.length&&B._newPlugin();var i=B._pool[B._inArr.length];t={name:n,clients:[],info:{name:n,manufacturer:B._allIns[n].manufacturer,version:B._allIns[n].version,type:"MIDI-in",sysex:B._sysex,engine:B._type},_start:function(){document.dispatchEvent(new CustomEvent("jazz-midi",{detail:["openin",i.id,n]}))},_close:function(e){B._closeIn(e)}},t.plugin=i,i.input=t,B._inArr.push(t),B._inMap[n]=t}e._orig._impl=t,p(t.clients,e._orig),e._info=t.info,e._close=function(){t._close(this)},t.open||(t.plugin.ready&&t._start(),e._pause())},B._closeOut=function(e){var n=e._impl;u(n.clients,e._orig),n.clients.length||(n.open=!1,document.dispatchEvent(new CustomEvent("jazz-midi",{detail:["closeout",n.plugin.id]})))},B._closeIn=function(e){var n=e._impl;u(n.clients,e._orig),n.clients.length||(n.open=!1,document.dispatchEvent(new CustomEvent("jazz-midi",{detail:["closein",n.plugin.id]})))},B._close=function(){},document.addEventListener("jazz-midi-msg",function(){var e=B._msg.innerText.split("\n");B._msg.innerText="";for(var n,o=0;o<e.length;o++){n=[];try{n=JSON.parse(e[o])}catch(n){}if(n.length)if("refresh"===n[0]){if(n[1].ins){for(var i=0;o<n[1].ins;o++)n[1].ins[i].type=B._type;B._ins=n[1].ins}if(n[1].outs){for(var i=0;o<n[1].outs;o++)n[1].outs[i].type=B._type;B._outs=n[1].outs}W._resume()}else if("version"===n[0]){var s=B._pool[n[1]];s&&(s.ready=!0,s.input&&s.input._start(),s.output&&s.output._start())}else if("openout"===n[0]){var a=B._pool[n[1]].output;if(a)if(n[2]==a.name){if(a.open=!0,a.clients)for(var o=0;o<a.clients.length;o++)a.clients[o]._resume();}else if(a.clients)for(var o=0;o<a.clients.length;o++)a.clients[o]._crash()}else if("openin"===n[0]){var a=B._pool[n[1]].input;if(a)if(n[2]==a.name){if(a.open=!0,a.clients)for(var o=0;o<a.clients.length;o++)a.clients[o]._resume();}else if(a.clients)for(var o=0;o<a.clients.length;o++)a.clients[o]._crash()}else if("midi"===n[0]){var a=B._pool[n[1]].input;if(a&&a.clients)for(var r,o=0;o<a.clients.length;o++)r=t(n.slice(3)),a.clients[o]._emit(r)}}})}var q="0.4.1";i.prototype._exec=function(){for(;this._ready&&this._queue.length;){var e=this._queue.shift();this._orig._bad?this._orig._hope&&e[0]==a?(this._orig._hope=!1,e[0].apply(this,e[1])):(this._queue=[],this._orig._hope=!1):e[0]!=a&&e[0].apply(this,e[1])}},i.prototype._push=function(e,n){this._queue.push([e,n]),i.prototype._exec.apply(this)},i.prototype._slip=function(e,n){this._queue.unshift([e,n])},i.prototype._pause=function(){this._ready=!1},i.prototype._resume=function(){this._ready=!0,i.prototype._exec.apply(this)},i.prototype._break=function(e){this._orig._bad=!0,this._orig._hope=!0,e&&this._orig._err.push(e)},i.prototype._repair=function(){this._orig._bad=!1},i.prototype._crash=function(e){this._break(e),this._resume()},i.prototype.err=function(){return c(this._err)},i.prototype.wait=function(e){function n(){}if(!e)return this;n.prototype=this._orig;var t=new n;return t._ready=!1,t._queue=[],this._push(o,[t,e]),t},i.prototype.and=function(e){return this._push(s,[e]),this},i.prototype.or=function(e){return this._push(a,[e]),this},i.prototype._info={},i.prototype.info=function(){var e=c(this._orig._info);return"undefined"==typeof e.engine&&(e.engine="none"),"undefined"==typeof e.sysex&&(e.sysex=!0),e},i.prototype.name=function(){return this.info().name},i.prototype.close=function(){var e=new i;return this._close&&this._push(this._close,[]),this._push(r,[e]),e},_.prototype=new i,_.prototype.time=function(){return 0},"undefined"!=typeof performance&&performance.now&&(_.prototype._time=function(){return performance.now()}),_.prototype._info={name:"JZZ.js",ver:q,version:q};var U=[],J=[];_.prototype.refresh=function(){return this._push(g,[]),this},_.prototype.openMidiOut=function(e){var n=new x;return this._push(g,[]),this._push(y,[n,e]),n},_.prototype.openMidiIn=function(e){var n=new x;return this._push(g,[]),this._push(v,[n,e]),n},_.prototype._close=function(){B._close()},x.prototype=new i,x.prototype._receive=function(e){this._emit(e)},x.prototype.send=function(){return this._push(I,[t.apply(null,arguments)]),this},x.prototype.note=function(e,i,n,o){return this.noteOn(e,i,n),o&&this.wait(o).noteOff(e,i),this},x.prototype._emit=function(e){for(var n=0;n<this._handles.length;n++)this._handles[n].apply(this,[t(e)._stamp(this)]);for(var i,n=0;n<this._outs.length;n++)i=t(e),i._stamped(this._outs[n])||this._outs[n].send(i._stamp(this))},x.prototype.emit=function(e){return this._push(z,[e]),this},x.prototype.connect=function(e){return this._push(b,[e]),this},x.prototype.disconnect=function(e){return this._push(M,[e]),this};var W,B={},N={_outs:[],_ins:[]},F=function(e){return W||P(e),W};return F.info=function(){return _.prototype.info()},F}()},{"jazz-midi":1}],10:[function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t,o=0;o<n.length;o++)t=n[o],t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),s=0,a=function(){function e(){i(this,e),this.store={},this.keys=[]}return o(e,[{key:"add",value:function(e){var n=""+new Date().getTime()+s;s+=1,this.keys.push(n),this.store[n]=e}},{key:"set",value:function(e,n){return this.keys.push(e),this.store[e]=n,this}},{key:"get",value:function(e){return this.store[e]}},{key:"has",value:function(e){return-1!==this.keys.indexOf(e)}},{key:"delete",value:function(e){delete this.store[e];var n=this.keys.indexOf(e);return-1<n&&this.keys.splice(n,1),this}},{key:"values",value:function(){for(var e,n=[],t=this.keys.length,o=0;o<t;o+=1)e=this.store[this.keys[o]],n.push(e);return n}},{key:"forEach",value:function(e){for(var n,t=this.keys.length,o=0;o<t;o+=1)n=this.store[this.keys[o]],e(n)}},{key:"clear",value:function(){this.keys=[],this.store={}}}]),e}();t.default=a},{}],11:[function(e,n,t){(function(e,n){"use strict";function i(){return"undefined"==typeof s?(s=null,"undefined"==typeof window?"undefined"!=typeof n&&(s=n):s=window,s):s}function o(){var n=i();if(null!=a)return a;var t="undetected",o="undetected";if(!0===n.navigator.node)return a={platform:e.platform,nodejs:!0,mobile:"ios"==t||"android"==t},a;var s=n.navigator.userAgent;return s.match(/(iPad|iPhone|iPod)/g)?t="ios":-1===s.indexOf("Android")?-1===s.indexOf("Linux")?-1===s.indexOf("Macintosh")?-1!==s.indexOf("Windows")&&(t="windows"):t="osx":t="linux":t="android",-1===s.indexOf("Chrome")?-1===s.indexOf("Safari")?-1===s.indexOf("Firefox")?-1!==s.indexOf("Trident")&&(o="ie",-1!==s.indexOf("MSIE 9")&&(o="ie9")):o="firefox":o="safari":(o="chrome",-1===s.indexOf("OPR")?-1!==s.indexOf("Chromium")&&(o="chromium"):o="opera"),"ios"==t&&-1!==s.indexOf("CriOS")&&(o="chrome"),a={platform:t,browser:o,mobile:"ios"==t||"android"==t,nodejs:!1},a}Object.defineProperty(t,"__esModule",{value:!0}),t.getScope=i,t.getDevice=o,t.generateUUID=function(){var e=new Date().getTime(),n=Array(64).join("x");return n=n.replace(/[xy]/g,function(n){var t=0|(e+16*Math.random())%16;return e=Math.floor(e/16),("x"===n?t:8|3&t).toString(16).toUpperCase()}),n},t.polyfill=function(){var e=o();("ie"===e.browser||!0===e.nodejs)&&l(),r()};var s=void 0,a=null,r=function(){var e=i();if("undefined"==typeof e.performance&&(e.performance={}),Date.now=Date.now||function(){return new Date().getTime()},"undefined"==typeof e.performance.now){var n=Date.now();"undefined"!=typeof e.performance.timing&&"undefined"!=typeof e.performance.timing.navigationStart&&(n=e.performance.timing.navigationStart),e.performance.now=function(){return Date.now()-n}}},l=function(){var e=i();"function"!=typeof e.Promise&&(e.Promise=function(e){this.executor=e},e.Promise.prototype.then=function(e,n){"function"!=typeof e&&(e=function(){}),"function"!=typeof n&&(n=function(){}),this.executor(e,n)})}}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{_process:2}]},{},[3]);